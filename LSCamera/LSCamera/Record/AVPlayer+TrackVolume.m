//
//  AVPlayer+TrackVolume.m
//  TaoVideo
//
//  Created by lihejun on 14-3-17.
//  Copyright (c) 2014å¹´ taovideo. All rights reserved.
//

#import "AVPlayer+TrackVolume.h"

@implementation AVPlayer (TrackVolume)

- (void)setVolume:(float)volume{
    NSArray *audioTracks = [self.currentItem.asset tracksWithMediaType:AVMediaTypeAudio];
    NSMutableArray *allAudioParams = [NSMutableArray array];
    for (AVAssetTrack *track in audioTracks) {
        AVMutableAudioMixInputParameters *audioInputParams = [AVMutableAudioMixInputParameters audioMixInputParameters];
        [audioInputParams setVolume:volume atTime:kCMTimeZero];
        [audioInputParams setTrackID:[track trackID]];
        [allAudioParams addObject:audioInputParams];
    }
    AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];
    [audioMix setInputParameters:allAudioParams];
    [self.currentItem setAudioMix:audioMix];
}

@end
